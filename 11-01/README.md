# Домашнее задание к занятию "11.01 Введение в микросервисы"

## Задача 1: Интернет Магазин

> Руководство крупного интернет магазина у которого постоянно растёт пользовательская база и количество заказов рассматривает возможность переделки своей внутренней ИТ системы на основе микросервисов. 
> 
> Вас пригласили в качестве консультанта для оценки целесообразности перехода на микросервисную архитектуру. 
> 
> Опишите какие выгоды может получить компания от перехода на микросервисную архитектуру и какие проблемы необходимо будет решить в первую очередь.

Поскольку по постановке задачи интернет-магазин задумывается о переделке внутренней ИТ системы на микросервисную архитектуру, он очевидно уже сталкивается с недостатками монолитной реализации:

- низкая общая надёжность работы системы;
- недостаточная производительность при сложностях масштабирования;
- сложности в изменении и развитии архитектуры;
- большая стоимость исправлений и дополнений функционала.

Плюсы перехода на микросервисную архитектуру:

1. Резко повысится общая надёжность работы всей системы. Это произойдёт потому, что сбои в работе одного из сервисов не будут препятствовать работе остальных сервисов, и восстановление работы "упавшего" сервиса будет происходить гораздо быстрее. Например, проблемы в работе сервиса рассылки уведомлений по e-mail не помешают магазину принимать заказы, а сам сбойный сервер может быть быстро перезапущен (на текущей версии, если случился какой-либо аппаратный сбой, или на предыдущей версии, если сбой был программный).

2. Система в целом станет гораздо более масштабируемой. Путём запуска нескольких экземпляров одного и того же сервиса, работающих в режиме балансировки нагрузки, легко можно увеличить пропускную способность системы в периоды большой загрузки, либо уменьшить её в "спокойные" моменты, чтобы сэкономить ресурсы (например, количество арендуемых виртуальных машин в облаке).

3. Станет гораздо проще дополнять систему новыми сервисами. Например, можно будет добавить рассылку уведомлений через социальные сети, просто реализовав новый сервис, слушающий ту же очередь событий на рассылку, что и уже существующий сервис рассылки e-mail. Либо же изменить правила обработки заказов для покупателей из-за рубежа добавив в модуль формирования заказа отправку сообщений в адрес нового модуля обработки подобных заказов.

4. Разработчикам станет гораздо проще развивать функционал. Необходимо будет тестировать только собственно функционал сервиса (от получения сообщения на выполнение действия откуда-то снаружи до отправки ответа или другого сообщения в адрес другого сервиса), без необходимости проходить всю цепочку действий, в которых задействован данный функционал (заходить в магазин, создавать и оформлять заказ, оплачивать - чтобы просто проверить отправку e-mail об оплате). Кроме того, развёртывание нового функционала станет существенно проще и безопаснее. Можно будет заменять сервисы новой версией постепенно, тем самым уходя от ситуации резкой деградации работы в пользу ситуации "изредка не работает".

5. В дополнение к решению существующих проблем, разработчики получат возможность заменить реализацию некоторых частей системы другими, более подходящими/актуальными/на другой платформе, "прозрачно" для остальных сервисов.

6. Также в микросервисной архитектуре станет проще управлять общей безопасностью системы и следить за её соблюдением, поскольку это можно будет делать специальными инструментами на межсерверном уровне, без необходимости программирования.

Проблемы, которые придётся решить при переходе на микросервисную архитектуру:

1. Необходимо будет реорганизовать процессы разработки системы: разделить ответственность разработчиков между сервисами (вместо одной большой общей команды создать несколько команд меньшего размера с меньшей зоной ответственности), решить проблемы взаимодействия команд между собой (путём создания документации по межсервисному взаимодействию), ввести систему версионирования артефактов и обеспечить поддержание совместимости интерфейсов между версиями.

2. Необходимо будет развернуть и поддерживать техническую инфраструктуру для разработки, такую как сервера для автоматизации сборки и тестирования, хранилище артефактов, возможно сервера для разработки (если она ведётся удалённо, а не на локальных машинах разработчиков).

3. Микросервисная архитектура подразумевает использование очень большого количества различных серверов и сервисов на них, что сразу же требует реализации системы мониторинга, сбора логов, в идеале систем управления настройками и технической инфраструктурой на основе подхода Infrastructure As a Code.


В целом, несмотря на сопутствующие минусы в виде возрастающих расходов на инфраструктуру и реформы в команде разработки, для большой и быстрорастущей компании внедрение микросервисной архитектуры однозначно оправдано, так как это позволит существенно снизить Time-to-Market новых возможностей и изменений, повысит надёжность работы системы, и упростит её трансформацию под новые условия (увеличение нагрузки, технические проблемы и др.) 